{"ast":null,"code":"var eventListenerOptions;\nvar eventMap = new WeakMap();\n\nfunction getOptions() {\n  if (eventListenerOptions !== undefined) {\n    return eventListenerOptions;\n  }\n\n  var supportPassiveEvent = false;\n\n  try {\n    var noop = function () {};\n\n    var options = Object.defineProperty({}, 'passive', {\n      get: function () {\n        supportPassiveEvent = true;\n      }\n    });\n    window.addEventListener('testPassive', noop, options);\n    window.removeEventListener('testPassive', noop, options);\n  } catch (e) {}\n\n  eventListenerOptions = supportPassiveEvent ? {\n    passive: false\n  } : false;\n  return eventListenerOptions;\n}\n\nexport function eventScope(scrollbar) {\n  var configs = eventMap.get(scrollbar) || [];\n  eventMap.set(scrollbar, configs);\n  return function addEvent(elem, events, fn) {\n    function handler(event) {\n      // ignore default prevented events\n      if (event.defaultPrevented) {\n        return;\n      }\n\n      fn(event);\n    }\n\n    events.split(/\\s+/g).forEach(function (eventName) {\n      configs.push({\n        elem: elem,\n        eventName: eventName,\n        handler: handler\n      });\n      elem.addEventListener(eventName, handler, getOptions());\n    });\n  };\n}\nexport function clearEventsOn(scrollbar) {\n  var configs = eventMap.get(scrollbar);\n\n  if (!configs) {\n    return;\n  }\n\n  configs.forEach(function (_a) {\n    var elem = _a.elem,\n        eventName = _a.eventName,\n        handler = _a.handler;\n    elem.removeEventListener(eventName, handler, getOptions());\n  });\n  eventMap.delete(scrollbar);\n}","map":{"version":3,"mappings":"AAAA,IAAIA,oBAAJ;AACA,IAAIC,QAAQ,GAAG,IAAIC,OAAJ,EAAf;;AACA,SAASC,UAAT,GAAsB;AAClB,MAAIH,oBAAoB,KAAKI,SAA7B,EAAwC;AACpC,WAAOJ,oBAAP;AACH;;AACD,MAAIK,mBAAmB,GAAG,KAA1B;;AACA,MAAI;AACA,QAAIC,IAAI,GAAG,YAAY,CAAG,CAA1B;;AACA,QAAIC,OAAO,GAAGC,MAAM,CAACC,cAAP,CAAsB,EAAtB,EAA0B,SAA1B,EAAqC;AAC/CC,MAAAA,GAAG,EAAE,YAAY;AACbL,QAAAA,mBAAmB,GAAG,IAAtB;AACH;AAH8C,KAArC,CAAd;AAKAM,IAAAA,MAAM,CAACC,gBAAP,CAAwB,aAAxB,EAAuCN,IAAvC,EAA6CC,OAA7C;AACAI,IAAAA,MAAM,CAACE,mBAAP,CAA2B,aAA3B,EAA0CP,IAA1C,EAAgDC,OAAhD;AACH,GATD,CAUA,OAAOO,CAAP,EAAU,CAAG;;AACbd,EAAAA,oBAAoB,GAAGK,mBAAmB,GAAG;AAAEU,IAAAA,OAAO,EAAE;AAAX,GAAH,GAAwB,KAAlE;AACA,SAAOf,oBAAP;AACH;;AACD,OAAO,SAASgB,UAAT,CAAoBC,SAApB,EAA+B;AAClC,MAAIC,OAAO,GAAGjB,QAAQ,CAACS,GAAT,CAAaO,SAAb,KAA2B,EAAzC;AACAhB,EAAAA,QAAQ,CAACkB,GAAT,CAAaF,SAAb,EAAwBC,OAAxB;AACA,SAAO,SAASE,QAAT,CAAkBC,IAAlB,EAAwBC,MAAxB,EAAgCC,EAAhC,EAAoC;AACvC,aAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACpB;AACA,UAAIA,KAAK,CAACC,gBAAV,EAA4B;AACxB;AACH;;AACDH,MAAAA,EAAE,CAACE,KAAD,CAAF;AACH;;AACDH,IAAAA,MAAM,CAACK,KAAP,CAAa,MAAb,EAAqBC,OAArB,CAA6B,UAAUC,SAAV,EAAqB;AAC9CX,MAAAA,OAAO,CAACY,IAAR,CAAa;AAAET,QAAAA,IAAI,EAAEA,IAAR;AAAcQ,QAAAA,SAAS,EAAEA,SAAzB;AAAoCL,QAAAA,OAAO,EAAEA;AAA7C,OAAb;AACAH,MAAAA,IAAI,CAACT,gBAAL,CAAsBiB,SAAtB,EAAiCL,OAAjC,EAA0CrB,UAAU,EAApD;AACH,KAHD;AAIH,GAZD;AAaH;AACD,OAAO,SAAS4B,aAAT,CAAuBd,SAAvB,EAAkC;AACrC,MAAIC,OAAO,GAAGjB,QAAQ,CAACS,GAAT,CAAaO,SAAb,CAAd;;AACA,MAAI,CAACC,OAAL,EAAc;AACV;AACH;;AACDA,EAAAA,OAAO,CAACU,OAAR,CAAgB,UAAUI,EAAV,EAAc;AAC1B,QAAIX,IAAI,GAAGW,EAAE,CAACX,IAAd;AAAA,QAAoBQ,SAAS,GAAGG,EAAE,CAACH,SAAnC;AAAA,QAA8CL,OAAO,GAAGQ,EAAE,CAACR,OAA3D;AACAH,IAAAA,IAAI,CAACR,mBAAL,CAAyBgB,SAAzB,EAAoCL,OAApC,EAA6CrB,UAAU,EAAvD;AACH,GAHD;AAIAF,EAAAA,QAAQ,CAACgC,MAAT,CAAgBhB,SAAhB;AACH","names":["eventListenerOptions","eventMap","WeakMap","getOptions","undefined","supportPassiveEvent","noop","options","Object","defineProperty","get","window","addEventListener","removeEventListener","e","passive","eventScope","scrollbar","configs","set","addEvent","elem","events","fn","handler","event","defaultPrevented","split","forEach","eventName","push","clearEventsOn","_a","delete"],"sourceRoot":"","sources":["../src/utils/event-hub.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { eventScope } from '../utils/';\nvar KEY_CODE;\n\n(function (KEY_CODE) {\n  KEY_CODE[KEY_CODE[\"TAB\"] = 9] = \"TAB\";\n  KEY_CODE[KEY_CODE[\"SPACE\"] = 32] = \"SPACE\";\n  KEY_CODE[KEY_CODE[\"PAGE_UP\"] = 33] = \"PAGE_UP\";\n  KEY_CODE[KEY_CODE[\"PAGE_DOWN\"] = 34] = \"PAGE_DOWN\";\n  KEY_CODE[KEY_CODE[\"END\"] = 35] = \"END\";\n  KEY_CODE[KEY_CODE[\"HOME\"] = 36] = \"HOME\";\n  KEY_CODE[KEY_CODE[\"LEFT\"] = 37] = \"LEFT\";\n  KEY_CODE[KEY_CODE[\"UP\"] = 38] = \"UP\";\n  KEY_CODE[KEY_CODE[\"RIGHT\"] = 39] = \"RIGHT\";\n  KEY_CODE[KEY_CODE[\"DOWN\"] = 40] = \"DOWN\";\n})(KEY_CODE || (KEY_CODE = {}));\n\nexport function keyboardHandler(scrollbar) {\n  var addEvent = eventScope(scrollbar);\n  var container = scrollbar.containerEl;\n  addEvent(container, 'keydown', function (evt) {\n    var activeElement = document.activeElement;\n\n    if (activeElement !== container && !container.contains(activeElement)) {\n      return;\n    }\n\n    if (isEditable(activeElement)) {\n      return;\n    }\n\n    var delta = getKeyDelta(scrollbar, evt.keyCode || evt.which);\n\n    if (!delta) {\n      return;\n    }\n\n    var x = delta[0],\n        y = delta[1];\n    scrollbar.addTransformableMomentum(x, y, evt, function (willScroll) {\n      if (willScroll) {\n        evt.preventDefault();\n      } else {\n        scrollbar.containerEl.blur();\n\n        if (scrollbar.parent) {\n          scrollbar.parent.containerEl.focus();\n        }\n      }\n    });\n  });\n}\n\nfunction getKeyDelta(scrollbar, keyCode) {\n  var size = scrollbar.size,\n      limit = scrollbar.limit,\n      offset = scrollbar.offset;\n\n  switch (keyCode) {\n    case KEY_CODE.TAB:\n      return handleTabKey(scrollbar);\n\n    case KEY_CODE.SPACE:\n      return [0, 200];\n\n    case KEY_CODE.PAGE_UP:\n      return [0, -size.container.height + 40];\n\n    case KEY_CODE.PAGE_DOWN:\n      return [0, size.container.height - 40];\n\n    case KEY_CODE.END:\n      return [0, limit.y - offset.y];\n\n    case KEY_CODE.HOME:\n      return [0, -offset.y];\n\n    case KEY_CODE.LEFT:\n      return [-40, 0];\n\n    case KEY_CODE.UP:\n      return [0, -40];\n\n    case KEY_CODE.RIGHT:\n      return [40, 0];\n\n    case KEY_CODE.DOWN:\n      return [0, 40];\n\n    default:\n      return null;\n  }\n}\n\nfunction handleTabKey(scrollbar) {\n  // handle in next frame\n  requestAnimationFrame(function () {\n    scrollbar.scrollIntoView(document.activeElement, {\n      offsetTop: scrollbar.size.container.height / 2,\n      onlyScrollIfNeeded: true\n    });\n  });\n}\n\nfunction isEditable(elem) {\n  if (elem.tagName === 'INPUT' || elem.tagName === 'SELECT' || elem.tagName === 'TEXTAREA' || elem.isContentEditable) {\n    return !elem.disabled;\n  }\n\n  return false;\n}","map":{"version":3,"mappings":"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","names":["eventScope","KEY_CODE","keyboardHandler","scrollbar","addEvent","container","containerEl","evt","activeElement","contains","isEditable","delta","getKeyDelta","keyCode","which","y","addTransformableMomentum","x","willScroll","preventDefault","blur","parent","focus","limit","offset","TAB","handleTabKey","SPACE","PAGE_UP","size","height","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","requestAnimationFrame","scrollIntoView","document","offsetTop","onlyScrollIfNeeded","elem","tagName","isContentEditable","disabled"],"sourceRoot":"","sources":["../src/events/keyboard.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}